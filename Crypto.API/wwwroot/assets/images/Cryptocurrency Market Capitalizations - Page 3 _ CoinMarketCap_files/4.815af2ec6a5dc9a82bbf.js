(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"5zSC":function(e,t,a){"use strict";var r=a("5Uuq"),n=a("KI45");Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTableListingFilter=function(e){var t=e.children,a=e["data-qa-id"],r=e.dropdownHeading,n=e.enableSubmit,u=e.hasValues,h=e.label,g=e.onApply,v=e.onClear,x=e.onClose,y=e.onOpen,S=e.t,b=(0,i.useRef)(),w=(0,i.useState)(!1),E=(0,o.default)(w,2),C=E[0],P=E[1],_=function(){P(!1),x&&x()};(0,c.default)(b,(0,i.useCallback)(_));return i.default.createElement(p,{className:"cmc-filter","data-qa-id":a,ref:b},i.default.createElement(f.default,{isOpen:C,content:i.default.createElement(m,{enableSubmit:n,heading:r,onApply:function(){if(g){var e=g();if(!e)return}P(!1)},onClear:function(){v&&v(),P(!1)},onClose:_,t:S},t),placement:"bottom"},i.default.createElement(d.default,{className:"cmc-filter-btn","data-qa-id":"filter-dd-toggle",isColorTransparent:u||C,onClick:function(){P(!C),y&&y()}},h,u&&!C?i.default.createElement(s.IconTimes,{className:"cmc-filter__icon-close","data-qa-id":"filter-x-icon",onClick:function(e){e.stopPropagation(),v&&v()},title:S("Remove filter")}):i.default.createElement(s.IconCaretDown,{className:(0,l.default)({"cmc-filter__icon-down":!C,"cmc-filter__icon-up":C})}))))};var o=n(a("8+Nu")),i=r(a("q1tI")),l=n(a("TSYQ")),u=n(a("vOnD")),s=a("oN8k"),c=n(a("FRqM")),f=n(a("RGrW")),d=n(a("co3k")),p=u.default.div.withConfig({componentId:"ru9ugp-0"})([".cmc-filter-dd{background-color:",";border:1px solid ",";border-radius:4px;margin-top:6px;}.cmc-filter-dd__main{padding:18px;}.cmc-filter-dd__heading{font-size:15px;margin-bottom:1rem;}.cmc-filter-dd__hr{margin-top:0;margin-bottom:0;}.cmc-filter-dd__footer{display:flex;padding:18px;}.cmc-filter-dd__footer__left{margin-right:auto;}.cmc-filter__icon-down{margin-left:6px;}.cmc-filter__icon-up{margin-left:6px;transform:rotate(180deg);}.cmc-filter__icon-close{margin-left:12px;&:hover{background-color:",";border-radius:4px;color:",";}}"],function(e){return e.theme.tabs.backgroundSelectedColor},function(e){return e.theme.tabs.borderHeaderColor},function(e){return e.theme.buttons.colors.transparent.textColor},function(e){return e.theme.buttons.colors.transparent.backgroundColor}),m=function(e){var t=e.children,a=e.enableSubmit,r=e.heading,n=e.onApply,o=e.onClear,l=e.onClose,u=e.t;return i.default.createElement("div",{className:"cmc-filter-dd"},i.default.createElement("div",{className:"cmc-filter-dd__main"},i.default.createElement("h6",{className:"cmc-filter-dd__heading"},r),t),i.default.createElement("hr",{className:"cmc-filter-dd__hr"}),i.default.createElement("div",{className:"cmc-filter-dd__footer"},i.default.createElement("div",{className:"cmc-filter-dd__footer__left"},i.default.createElement(d.default,{onClick:o,"data-qa-id":"filter-dd-button-clear"},u("Clear filter"))),i.default.createElement("div",{className:"cmc-filter-dd__footer__right"},i.default.createElement(d.default,{onClick:l,"data-qa-id":"filter-dd-button-cancel"},u("Cancel"))," ",i.default.createElement(d.default,{"data-qa-id":"filter-dd-button-apply",disabled:!a,isColorBlue:a,isColorGrey:!a,onClick:n},u("Apply")))))}},Dtep:function(e,t,a){"use strict";var r=a("KI45");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return n.default.createElement(i,(0,o.default)({type:"button"},e))};var n=r(a("q1tI")),o=r(a("htGi")),i=r(a("vOnD")).default.button.withConfig({componentId:"llu3ye-0"})(["background-color:transparent;border-radius:4px;border:1px solid transparent;color:",";cursor:pointer;display:inline-block;font-size:14px;font-weight:normal;line-height:1.5;margin:0;outline:none !important;padding:.375rem .75rem;text-align:center;text-decoration:none;user-select:none;vertical-align:middle;white-space:nowrap;&:focus,&:hover{text-decoration:underline;}"],function(e){return e.theme.buttons.colors.default.textColor})},"I+R4":function(e,t,a){"use strict";var r=a("KI45"),n=a("5Uuq");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),i=r(a("pLtp")),l=r(a("Avpf")),u=r(a("/HRN")),s=r(a("WaGi")),c=r(a("ZDA2")),f=r(a("/+P4")),d=r(a("K47E")),p=r(a("N9n2")),m=r(a("xHqa")),h=r(a("vOnD")),g=r(a("Dtep")),v=r(a("T/Gu")),x=h.default.div.withConfig({componentId:"sc-1mfop2u-0"})(["display:flex;flex-wrap:wrap;padding-bottom:6px;padding-top:12px;.cmc-filter{margin-left:0;margin-right:12px;margin-bottom:6px;}.cmc-filters__clear-all{margin-left:auto;margin-bottom:6px;}"]),y=function(e){function t(e){var a;return(0,u.default)(this,t),a=(0,c.default)(this,(0,f.default)(t).call(this,e)),(0,m.default)((0,d.default)(a),"handleApply",function(e){var t=a.props.onApply;a.cache=(0,l.default)({},a.cache,e),t&&t(a.cache)}),(0,m.default)((0,d.default)(a),"handleClearAll",function(){if((0,i.default)(a.cache).length){var e=a.props.onApply;e&&e({mcapMin:void 0,mcapMax:void 0,priceMin:void 0,priceMax:void 0,volumeMin:void 0,volumeMax:void 0,circSupplyMin:void 0,circSupplyMax:void 0,percentChangeMin:void 0,percentChangeMax:void 0}),a.cache={}}}),a.cache={},a}return(0,p.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.filters,a=void 0===t?{}:t,r=e.locale,n=e.t;return o.default.createElement(x,null,o.default.createElement(v.default,{paramPrefix:"mcap",label:n("Market Cap"),locale:r,dropdownHeading:n("Market Cap range"),min:a.mcapMin,max:a.mcapMax,minPlaceholder:0,maxPlaceholder:999999999999,onApply:this.handleApply,prefix:"$",t:n}),o.default.createElement(v.default,{paramPrefix:"price",label:n("Price"),locale:r,dropdownHeading:n("Price range"),min:a.priceMin,max:a.priceMax,minPlaceholder:0,maxPlaceholder:99999,onApply:this.handleApply,prefix:"$",t:n}),o.default.createElement(v.default,{paramPrefix:"volume",label:n("Volume (24h)"),locale:r,dropdownHeading:n("Volume (24h) range"),min:a.volumeMin,max:a.volumeMax,minPlaceholder:0,maxPlaceholder:999999999999,onApply:this.handleApply,prefix:"$",t:n}),o.default.createElement(v.default,{paramPrefix:"circSupply",label:n("Circulating Supply"),locale:r,dropdownHeading:n("Circulating Supply range"),min:a.circSupplyMin,max:a.circSupplyMax,minPlaceholder:0,maxPlaceholder:999999999999999,onApply:this.handleApply,t:n}),o.default.createElement(v.default,{paramPrefix:"percentChange",label:n("Change (24h)"),locale:r,dropdownHeading:n("Change (24h) range"),min:a.percentChangeMin,max:a.percentChangeMax,minPlaceholder:-100,maxPlaceholder:1e3,onApply:this.handleApply,suffix:"%",t:n}),o.default.createElement(g.default,{className:"cmc-filters__clear-all",onClick:this.handleClearAll},n("Clear filters")))}}]),t}(o.PureComponent);t.default=y},"T/Gu":function(e,t,a){"use strict";var r=a("KI45");Object.defineProperty(t,"__esModule",{value:!0}),t.isValidRange=S,t.default=void 0;var n=r(a("ZDA2")),o=r(a("/+P4")),i=r(a("K47E")),l=r(a("N9n2")),u=r(a("xHqa")),s=r(a("/HRN")),c=r(a("WaGi")),f=r(a("q1tI")),d=r(a("vOnD")),p=r(a("aZ9c")),m=a("NV0Y"),h=r(a("KV1Y")),g=r(a("qrJy")),v=a("ZeJs"),x=a("5zSC"),y=d.default.div.withConfig({componentId:"sc-1hlf0zq-0"})([".cmc-range-filter{display:flex;align-items:center;justify-content:space-evenly;width:100%;@media (min-width:","px){width:332px;}}.cmc-range-filter__to{margin:0 12px;}.cmc-range-filter-error{color:#d94040;font-size:12px;height:1em;margin-top:3px;}"],m.breakpoints.XSMALL_MIN);function S(e,t){var a=isNaN(e),r=isNaN(t);return!(!(a&&r)&&!(a||r))||e<t}var b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.floatValue,r=t.formattedValue,n=void 0===r?"":r;(0,s.default)(this,e),this.floatValue=a,this.formattedValue=n}return(0,c.default)(e,[{key:"toJSON",value:function(){return{floatValue:this.floatValue,formattedValue:this.formattedValue}}},{key:"isEmpty",value:function(){return""===this.floatValue||void 0===this.floatValue}}]),e}(),w=d.default.input.attrs(function(){return{fontSize:"14px"}}).withConfig({componentId:"sc-1hlf0zq-1"})(["",""],v.InputPrimaryStyles),E=function(e){function t(e){var a;(0,s.default)(this,t),a=(0,n.default)(this,(0,o.default)(t).call(this,e)),(0,u.default)((0,i.default)(a),"setFormatter",function(e){var t=new h.default({locale:e});a.thousandSeparator=t.toLocaleString(1111).replace(/1/g,""),a.decimalSeparator=t.toLocaleString(1.1).replace(/1/g,""),a.format=function(e){return t.toLocaleString(e,{minDecimalPlaces:0,maxDecimalPlaces:20})||a.DEFAULT}}),(0,u.default)((0,i.default)(a),"isFormValid",function(e,t){return S(e.floatValue,t.floatValue)}),(0,u.default)((0,i.default)(a),"validate",function(e){var t=a.state,r=t.isSubmittable,n=t.min,o=t.max;if(n!==e.min||o!==e.max){var i=a.isFormValid(n,o),l=n.isEmpty()&&o.isEmpty();r?i?l&&a.setState({error:a.DEFAULT,showError:!1,isSubmittable:!1}):a.setState({error:a.props.t("Error, please enter a valid range from low to high."),isSubmittable:!1}):i&&a.setState({error:a.DEFAULT,showError:!1,isSubmittable:!0}),a.showError()}}),(0,u.default)((0,i.default)(a),"showError",g.default.debounce(function(){a.setState(function(e){if(e.error)return{showError:!0}})},500)),(0,u.default)((0,i.default)(a),"handleMinChange",function(e){var t=e.formattedValue,r=e.floatValue;a.setState({min:new b({formattedValue:t,floatValue:r})})}),(0,u.default)((0,i.default)(a),"handleMaxChange",function(e){var t=e.formattedValue,r=e.floatValue;a.setState({max:new b({formattedValue:t,floatValue:r})})}),(0,u.default)((0,i.default)(a),"handleApply",function(){var e,t=a.props.onApply,r=a.state,n=r.isSubmittable,o=r.min,i=r.max;return n?(a.setState(function(e){return{error:a.DEFAULT,showError:!1,minPrev:e.min,maxPrev:e.max}}),t&&t((e={},(0,u.default)(e,a.minFieldName,o.toJSON()),(0,u.default)(e,a.maxFieldName,i.toJSON()),e)),!0):(console.error("Invalid form values"),!1)}),(0,u.default)((0,i.default)(a),"handleClear",function(){a.setState(function(e,t){if(!e.min.isEmpty()||!e.max.isEmpty()){var r,n=t.onApply;return n&&n((r={},(0,u.default)(r,a.minFieldName,void 0),(0,u.default)(r,a.maxFieldName,void 0),r)),{error:a.DEFAULT,showError:!1,min:new b,max:new b,minPrev:new b,maxPrev:new b}}})}),(0,u.default)((0,i.default)(a),"handleClose",function(){a.setState(function(e){return{error:a.DEFAULT,showError:!1,min:e.minPrev,max:e.maxPrev}})}),(0,u.default)((0,i.default)(a),"getLabel",function(e,t,r){var n=a.props,o=n.label,i=n.t;if(e){var l=t.isEmpty()?i("min"):t.formattedValue,u=r.isEmpty()?i("max"):r.formattedValue;return"".concat(o,": ").concat(l," - ").concat(u)}return o}),(0,u.default)((0,i.default)(a),"handleOpen",function(){a.setState({shouldSetFocus:!0})}),(0,u.default)((0,i.default)(a),"setFocus",function(e){a.setState(function(t){if(t.shouldSetFocus&&e&&e.focus)return e.focus(),{shouldSetFocus:!1}})}),a.DEFAULT="";var r=e.locale,l=e.min,c=e.max,f=e.paramPrefix;return a.setFormatter(r),a.minFieldName="".concat(f,"Min"),a.maxFieldName="".concat(f,"Max"),a.state={error:a.DEFAULT,showError:!1,isSubmittable:!1,shouldSetFocus:!1,min:new b(l),max:new b(c),minPrev:new b(l),maxPrev:new b(c)},a}return(0,l.default)(t,e),(0,c.default)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this.props,r=a.locale,n=a.min,o=a.max;this.validate(t),n!==e.min&&this.setState({min:new b(n),minPrev:new b(n)}),o!==e.max&&this.setState({max:new b(o),maxPrev:new b(o)}),r!==e.locale&&this.setFormatter(r)}},{key:"componentWillUnmount",value:function(){this.showError.cancel()}},{key:"render",value:function(){var e=this.props,t=e.dropdownHeading,a=e.minPlaceholder,r=e.maxPlaceholder,n=e.paramPrefix,o=e.prefix,i=e.suffix,l=e.t,u=this.state,s=u.error,c=u.isSubmittable,d=u.min,m=u.max,h=u.minPrev,g=u.maxPrev,v=u.showError,S=!h.isEmpty()||!g.isEmpty(),b=this.getLabel(S,h,g);return f.default.createElement(y,null,f.default.createElement(x.BaseTableListingFilter,{"data-qa-id":"range-filter-".concat(n),dropdownHeading:t,label:b,enableSubmit:c,hasValues:S,onApply:this.handleApply,onClear:this.handleClear,onClose:this.handleClose,onOpen:this.handleOpen,t:l},f.default.createElement("div",{className:"cmc-range-filter"},f.default.createElement("div",{className:"cmc-range-filter__input"},f.default.createElement(p.default,{customInput:w,"data-qa-id":"range-filter-input-min",decimalSeparator:this.decimalSeparator,getInputRef:this.setFocus,isNumericString:!1,name:this.minFieldName,onValueChange:this.handleMinChange,placeholder:this.format(a),prefix:o,suffix:i,thousandSeparator:this.thousandSeparator,type:"text",value:d.floatValue})),f.default.createElement("div",{className:"cmc-range-filter__to"},l("to")),f.default.createElement("div",{className:"cmc-range-filter__input"},f.default.createElement(p.default,{customInput:w,"data-qa-id":"range-filter-input-max",decimalSeparator:this.decimalSeparator,isNumericString:!1,name:this.maxFieldName,onValueChange:this.handleMaxChange,placeholder:this.format(r),prefix:o,suffix:i,thousandSeparator:this.thousandSeparator,type:"text",value:m.floatValue}))),f.default.createElement("div",{className:"cmc-range-filter-error"},v&&s)))}}]),t}(f.default.PureComponent);t.default=E},aZ9c:function(e,t,a){"use strict";a.r(t);var r=a("q1tI"),n=a.n(r);function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var c="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function f(){}function d(){}d.resetWarningCache=f;var p=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){e.exports=function(){function e(e,t,a,r,n,o){if(o!==c){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:d,resetWarningCache:f};return a.PropTypes=a,a}()});function m(){}function h(e){return!!(e||"").match(/\d/)}function g(e){return e.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")}function v(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a="-"===e[0],r=a&&t,n=(e=e.replace("-","")).split(".");return{beforeDecimal:n[0],afterDecimal:n[1]||"",hasNagation:a,addNegation:r}}function x(e,t,a){for(var r="",n=a?"0":"",o=0;o<=t-1;o++)r+=e[o]||n;return r}function y(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var a=e.createTextRange();return a.move("character",t),a.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}function S(e,t,a){return Math.min(Math.max(e,t),a)}function b(e){return Math.max(e.selectionStart,e.selectionEnd)}var w={thousandSeparator:p.oneOfType([p.string,p.oneOf([!0])]),decimalSeparator:p.string,allowedDecimalSeparators:p.arrayOf(p.string),thousandsGroupStyle:p.oneOf(["thousand","lakh","wan"]),decimalScale:p.number,fixedDecimalScale:p.bool,displayType:p.oneOf(["input","text"]),prefix:p.string,suffix:p.string,format:p.oneOfType([p.string,p.func]),removeFormatting:p.func,mask:p.oneOfType([p.string,p.arrayOf(p.string)]),value:p.oneOfType([p.number,p.string]),defaultValue:p.oneOfType([p.number,p.string]),isNumericString:p.bool,customInput:p.elementType,allowNegative:p.bool,allowEmptyFormatting:p.bool,allowLeadingZeros:p.bool,onValueChange:p.func,onKeyDown:p.func,onMouseUp:p.func,onChange:p.func,onFocus:p.func,onBlur:p.func,type:p.oneOf(["text","tel","password"]),isAllowed:p.func,renderText:p.func,getInputRef:p.func},E={displayType:"input",decimalSeparator:".",thousandsGroupStyle:"thousand",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,allowEmptyFormatting:!1,allowLeadingZeros:!1,isNumericString:!1,type:"text",onValueChange:m,onChange:m,onKeyDown:m,onMouseUp:m,onFocus:m,onBlur:m,isAllowed:function(){return!0}},C=function(e){function t(e){var a,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=!(n=l(t).call(this,e))||"object"!=typeof n&&"function"!=typeof n?s(r):n;var o=e.defaultValue;a.validateProps();var i=a.formatValueProp(o);return a.state={value:i,numAsString:a.removeFormatting(i)},a.selectionBeforeInput={selectionStart:0,selectionEnd:0},a.onChange=a.onChange.bind(s(s(a))),a.onKeyDown=a.onKeyDown.bind(s(s(a))),a.onMouseUp=a.onMouseUp.bind(s(s(a))),a.onFocus=a.onFocus.bind(s(s(a))),a.onBlur=a.onBlur.bind(s(s(a))),a}var a,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,n.a.Component),a=t,(r=[{key:"componentDidUpdate",value:function(e){this.updateValueIfRequired(e)}},{key:"updateValueIfRequired",value:function(e){var t=this.props,a=this.state,r=this.focusedElm,n=a.value,o=a.numAsString,i=void 0===o?"":o;if(e!==t){this.validateProps();var l=this.formatNumString(i),u=void 0===t.value?l:this.formatValueProp(),s=this.removeFormatting(u),c=parseFloat(s),f=parseFloat(i);(isNaN(c)&&isNaN(f)||c===f)&&l===n&&(null!==r||u===n)||this.updateValue({formattedValue:u,numAsString:s,input:r})}}},{key:"getFloatString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.decimalScale,a=this.getSeparators().decimalSeparator,r=this.getNumberRegex(!0),n="-"===e[0];n&&(e=e.replace("-","")),a&&0===t&&(e=e.split(a)[0]);var o=(e=(e.match(r)||[]).join("").replace(a,".")).indexOf(".");return-1!==o&&(e="".concat(e.substring(0,o),".").concat(e.substring(o+1,e.length).replace(new RegExp(g(a),"g"),""))),n&&(e="-"+e),e}},{key:"getNumberRegex",value:function(e,t){var a=this.props,r=a.format,n=a.decimalScale,o=this.getSeparators().decimalSeparator;return new RegExp("\\d"+(!o||0===n||t||r?"":"|"+g(o)),e?"g":void 0)}},{key:"getSeparators",value:function(){var e=this.props.decimalSeparator,t=this.props,a=t.thousandSeparator,r=t.allowedDecimalSeparators;return!0===a&&(a=","),r||(r=[e,"."]),{decimalSeparator:e,thousandSeparator:a,allowedDecimalSeparators:r}}},{key:"getMaskAtIndex",value:function(e){var t=this.props.mask,a=void 0===t?" ":t;return"string"==typeof a?a:a[e]||" "}},{key:"getValueObject",value:function(e,t){var a=parseFloat(t);return{formattedValue:e,value:t,floatValue:isNaN(a)?void 0:a}}},{key:"validateProps",value:function(){var e=this.props.mask,t=this.getSeparators(),a=t.decimalSeparator,r=t.thousandSeparator;if(a===r)throw new Error("\n          Decimal separator can't be same as thousand separator.\n          thousandSeparator: ".concat(r,' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: ').concat(a," (default value for decimalSeparator is .)\n       "));if(e&&("string"===e?e:e.toString()).match(/\d/g))throw new Error("\n          Mask ".concat(e," should not contain numeric character;\n        "))}},{key:"setPatchedCaretPosition",value:function(e,t,a){y(e,t),setTimeout(function(){e.value===a&&y(e,t)},0)}},{key:"correctCaretPosition",value:function(e,t,a){var r=this.props,n=r.prefix,o=r.suffix,i=r.format;if(""===e)return 0;if(t=S(t,0,e.length),!i){var l="-"===e[0];return S(t,n.length+(l?1:0),e.length-o.length)}if("function"==typeof i)return t;if("#"===i[t]&&h(e[t]))return t;if("#"===i[t-1]&&h(e[t-1]))return t;var u=i.indexOf("#");t=S(t,u,i.lastIndexOf("#")+1);for(var s=i.substring(t,i.length).indexOf("#"),c=t,f=t+(-1===s?0:s);c>u&&("#"!==i[c]||!h(e[c]));)c-=1;return!h(e[f])||"left"===a&&t!==u||t-c<f-t?h(e[c])?c+1:c:f}},{key:"getCaretPosition",value:function(e,t,a){var r,n,o=this.props.format,i=this.state.value,l=this.getNumberRegex(!0),u=(e.match(l)||[]).join(""),s=(t.match(l)||[]).join("");for(r=0,n=0;n<a;n++){var c=e[n]||"",f=t[r]||"";if((c.match(l)||c===f)&&("0"!==c||!f.match(l)||"0"===f||u.length===s.length)){for(;c!==t[r]&&r<t.length;)r++;r++}}return"string"!=typeof o||i||(r=t.length),r=this.correctCaretPosition(t,r)}},{key:"removePrefixAndSuffix",value:function(e){var t=this.props,a=t.format,r=t.prefix,n=t.suffix;if(!a&&e){var o="-"===e[0];o&&(e=e.substring(1,e.length));var i=(e=r&&0===e.indexOf(r)?e.substring(r.length,e.length):e).lastIndexOf(n);e=n&&-1!==i&&i===e.length-n.length?e.substring(0,i):e,o&&(e="-"+e)}return e}},{key:"removePatternFormatting",value:function(e){for(var t=this.props.format.split("#").filter(function(e){return""!==e}),a=0,r="",n=0,o=t.length;n<=o;n++){var i=t[n]||"",l=n===o?e.length:e.indexOf(i,a);if(-1===l){r=e;break}r+=e.substring(a,l),a=l+i.length}return(r.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(e){var t=this.props,a=t.format,r=t.removeFormatting;return e?(a?e="string"==typeof a?this.removePatternFormatting(e):"function"==typeof r?r(e):(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e):e}},{key:"formatWithPattern",value:function(e){for(var t=this.props.format,a=0,r=t.split(""),n=0,o=t.length;n<o;n++)"#"===t[n]&&(r[n]=e[a]||this.getMaskAtIndex(a),a+=1);return r.join("")}},{key:"formatAsNumber",value:function(e){var t=this.props,a=t.decimalScale,r=t.fixedDecimalScale,n=t.prefix,o=t.suffix,i=t.allowNegative,l=t.thousandsGroupStyle,u=this.getSeparators(),s=u.thousandSeparator,c=u.decimalSeparator,f=-1!==e.indexOf(".")||a&&r,d=v(e,i),p=d.beforeDecimal,m=d.afterDecimal,h=d.addNegation;return void 0!==a&&(m=x(m,a,r)),s&&(p=function(e,t,a){var r=function(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}(a),n=e.search(/[1-9]/);return n=-1===n?e.length:n,e.substring(0,n)+e.substring(n,e.length).replace(r,"$1"+t)}(p,s,l)),n&&(p=n+p),o&&(m+=o),h&&(p="-"+p),e=p+(f&&c||"")+m}},{key:"formatNumString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props,a=t.format,r=t.allowEmptyFormatting,n=e;return n=""!==e||r?"-"!==e||a?"string"==typeof a?this.formatWithPattern(n):"function"==typeof a?a(n):this.formatAsNumber(n):"-":""}},{key:"formatValueProp",value:function(e){var t=this.props,a=t.format,r=t.decimalScale,n=t.fixedDecimalScale,o=t.allowEmptyFormatting,i=this.props,l=i.value,u=void 0===l?e:l,s=i.isNumericString,c=!u&&0!==u;return c&&o&&(u=""),c&&!o?"":("number"==typeof u&&(u=u.toString(),s=!0),"Infinity"===u&&s&&(u=""),s&&!a&&"number"==typeof r&&(u=function(e,t,a){if(-1!==["","-"].indexOf(e))return e;var r=-1!==e.indexOf(".")&&t,n=v(e),o=n.beforeDecimal,i=n.afterDecimal,l=n.hasNagation,u=parseFloat("0.".concat(i||"0")).toFixed(t).split("."),s=o.split("").reverse().reduce(function(e,t,a){return e.length>a?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e},u[0]),c=x(u[1]||"",Math.min(t,i.length),a),f=r?".":"";return"".concat(l?"-":"").concat(s).concat(f).concat(c)}(u,r,n)),s?this.formatNumString(u):this.formatInput(u))}},{key:"formatNegation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.allowNegative,a=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),n=a.test(e),o=r.test(e);return e=e.replace(/-/g,""),n&&!o&&t&&(e="-"+e),e}},{key:"formatInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.props.format||(e=this.removePrefixAndSuffix(e),e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)}},{key:"isCharacterAFormat",value:function(e,t){var a=this.props,r=a.format,n=a.prefix,o=a.suffix,i=a.decimalScale,l=a.fixedDecimalScale,u=this.getSeparators().decimalSeparator;return"string"==typeof r&&"#"!==r[e]||!(r||!(e<n.length||e>=t.length-o.length||i&&l&&t[e]===u))}},{key:"checkIfFormatGotDeleted",value:function(e,t,a){for(var r=e;r<t;r++)if(this.isCharacterAFormat(r,a))return!0;return!1}},{key:"correctInputValue",value:function(e,t,a){var r=this.props,n=r.format,o=r.allowNegative,i=r.prefix,l=r.suffix,u=this.getSeparators(),s=u.allowedDecimalSeparators,c=u.decimalSeparator,f=this.state.numAsString||"",d=this.selectionBeforeInput,p=d.selectionStart,m=d.selectionEnd,h=function(e,t){for(var a=0,r=0,n=e.length,o=t.length;e[a]===t[a]&&a<n;)a++;for(;e[n-1-r]===t[o-1-r]&&o-r>a&&n-r>a;)r++;return{start:a,end:n-r}}(t,a),g=h.start,x=h.end;if(!n&&g===x&&-1!==s.indexOf(a[p]))return a.substr(0,p)+c+a.substr(p+1,a.length);var y=n?0:i.length,S=t.length-(n?0:l.length);if(a.length>t.length||!a.length||g===x||0===p&&m===t.length||p===y&&m===S)return a;if(this.checkIfFormatGotDeleted(g,x,t)&&(a=t),!n){var b=this.removeFormatting(a),w=v(b,o),E=w.beforeDecimal,C=w.afterDecimal,P=w.addNegation,_=e<a.indexOf(c)+1;if(b.length<f.length&&_&&""===E&&!parseFloat(C))return P?"-":""}return a}},{key:"updateValue",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,r=e.formattedValue,n=e.input,o=e.numAsString,i=e.caretPos,l=this.props.onValueChange,u=this.state.value;if(n){if(!i){var s=e.inputValue||n.value,c=b(n);i=this.getCaretPosition(s,r,c)}n.value=r,this.setPatchedCaretPosition(n,i,r)}void 0===o&&(o=this.removeFormatting(r)),r!==u?this.setState({value:r,numAsString:o},function(){l(t.getValueObject(r,o)),a()}):a()}},{key:"onChange",value:function(e){e.persist();var t=e.target,a=t.value,r=this.state,n=this.props,o=n.isAllowed,i=r.value||"",l=b(t);a=this.correctInputValue(l,i,a);var u=this.formatInput(a)||"",s=this.removeFormatting(u);o(this.getValueObject(u,s))||(u=i),this.updateValue({formattedValue:u,numAsString:s,inputValue:a,input:t},function(){n.onChange(e)})}},{key:"onBlur",value:function(e){var t=this.props,a=this.state,r=t.format,n=t.onBlur,o=t.allowLeadingZeros,i=a.numAsString,l=a.value;if(this.focusedElm=null,this.focusTimeout&&clearTimeout(this.focusTimeout),!r){o||(i=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var a=e.split("."),r=a[0].replace(/^0+/,"")||"0",n=a[1]||"";return"".concat(t?"-":"").concat(r).concat(n?".".concat(n):"")}(i));var u=this.formatNumString(i);if(u!==l)return e.persist(),void this.updateValue({formattedValue:u,numAsString:i},function(){n(e)})}n(e)}},{key:"onKeyDown",value:function(e){var t,a=e.target,r=e.key,n=a.selectionStart,o=a.selectionEnd,i=a.value,l=void 0===i?"":i,u=this.props,s=u.decimalScale,c=u.fixedDecimalScale,f=u.prefix,d=u.suffix,p=u.format,m=u.onKeyDown,h=(u.onValueChange,void 0!==s&&c),g=this.getNumberRegex(!1,h),v=new RegExp("-"),x="string"==typeof p;if(this.selectionBeforeInput={selectionStart:n,selectionEnd:o},"ArrowLeft"===r||"Backspace"===r?t=n-1:"ArrowRight"===r?t=n+1:"Delete"===r&&(t=n),void 0!==t&&n===o){var y=t,S=x?p.indexOf("#"):f.length,b=x?p.lastIndexOf("#")+1:l.length-d.length;if("ArrowLeft"===r||"ArrowRight"===r){var w="ArrowLeft"===r?"left":"right";y=this.correctCaretPosition(l,t,w)}else if("Delete"!==r||g.test(l[t])||v.test(l[t])){if("Backspace"===r&&!g.test(l[t]))if(n<=S+1&&"-"===l[0]&&void 0===p){var E=l.substring(1);e.persist(),this.updateValue({formattedValue:E,caretPos:y,input:a})}else if(!v.test(l[t])){for(;!g.test(l[y-1])&&y>S;)y--;y=this.correctCaretPosition(l,y,"left")}}else for(;!g.test(l[y])&&y<b;)y++;(y!==t||t<S||t>b)&&(e.preventDefault(),this.setPatchedCaretPosition(a,y,l)),e.isUnitTestRun&&this.setPatchedCaretPosition(a,y,l),this.props.onKeyDown(e)}else m(e)}},{key:"onMouseUp",value:function(e){var t=e.target,a=t.selectionStart,r=t.selectionEnd,n=t.value,o=void 0===n?"":n;if(a===r){var i=this.correctCaretPosition(o,a);i!==a&&this.setPatchedCaretPosition(t,i,o)}this.props.onMouseUp(e)}},{key:"onFocus",value:function(e){var t=this;e.persist(),this.focusedElm=e.target,this.focusTimeout=setTimeout(function(){var a=e.target,r=a.selectionStart,n=a.selectionEnd,o=a.value,i=void 0===o?"":o,l=t.correctCaretPosition(i,r);l===r||0===r&&n===i.length||t.setPatchedCaretPosition(a,l,i),t.props.onFocus(e)},0)}},{key:"render",value:function(){var e,t,a,r=this.props,o=r.type,l=r.displayType,u=r.customInput,s=r.renderText,c=r.getInputRef,f=this.state.value,d=(e=this.props,t=w,a={},Object.keys(e).forEach(function(r){t[r]||(a[r]=e[r])}),a),p=i({},d,{type:o,value:f,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===l)return s?s(f)||null:n.a.createElement("span",i({},d,{ref:c}),f);if(u){var m=u;return n.a.createElement(m,i({},p,{ref:c}))}return n.a.createElement("input",i({},p,{ref:c}))}}])&&o(a.prototype,r),c&&o(a,c),t}();C.propTypes=w,C.defaultProps=E,t.default=C}}]);